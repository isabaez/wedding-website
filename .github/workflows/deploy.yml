name: Deploy to GitHub Pages

  on:
    push:
      branches:
        - main # Trigger on pushes to the main branch

  jobs:
    build-and-deploy:
      runs-on: ubuntu-latest

      steps:
        - name: Checkout 🛎️
          uses: actions/checkout@v4

        - name: Setup Node.js 
          uses: actions/setup-node@v4
          with:
            node-version: '22' # Or your preferred Node.js version

        - name: Install dependencies
          run: npm install

        - name: Build Next.js app
          run: npm run build

        - name: Add .nojekyll file (for non-Jekyll sites)
          run: touch ./out/.nojekyll # Assuming 'out' is your build output directory

        - name: Deploy 🚀
          uses: JamesIves/github-pages-deploy-action@v4
          with:
            branch: main # The branch to deploy to (or 'public' if using that convention)
            folder: out # The folder containing your built static files